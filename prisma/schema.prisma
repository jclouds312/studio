// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id                    String    @id @default(cuid())
  name                  String
  email                 String    @unique
  password              String?
  avatar                String?
  role                  String    @default("user") // 'user', 'company', 'admin'
  status                String?   @default("Verificado") // 'Verificado', 'Pendiente', 'Suspendido'
  phone                 String?
  location              String?
  professionalSummary   String?
  experience            String?
  savedJobIds           String[]
  subscriptionPlan      String?
  subscriptionUntil     DateTime?
  companyProfile        CompanyProfile?
  applications          Application[]
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
}

model CompanyProfile {
  id      String  @id @default(cuid())
  userId  String  @unique
  user    User    @relation(fields: [userId], references: [id])
  name    String
  cuit    String  @unique
  address String?
  city    String?
  province String?
  phone   String?
  logoUrl String?
  status  String  @default("Activa") // 'Activa', 'Inactiva', 'Pendiente'
  jobs    Job[]
}

model Job {
  id              String      @id @default(cuid())
  title           String
  company         String
  companyLogo     String
  location        String
  type            String      // 'Full-time', 'Part-time', etc.
  category        String
  description     String
  whatsapp        String?
  salary          String?
  isFeatured      Boolean     @default(false)
  isNew           Boolean     @default(false)
  companyProfileId String?
  companyProfile  CompanyProfile? @relation(fields: [companyProfileId], references: [id])
  applications    Application[]
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
}

model Application {
  id        String   @id @default(cuid())
  userId    String
  jobId     String
  user      User     @relation(fields: [userId], references: [id])
  job       Job      @relation(fields: [jobId], references: [id])
  status    String   @default("EN_REVISION") // 'EN_REVISION', 'CONTACTADO', 'RECHAZADO'
  createdAt DateTime @default(now())

  @@unique([userId, jobId])
}

    